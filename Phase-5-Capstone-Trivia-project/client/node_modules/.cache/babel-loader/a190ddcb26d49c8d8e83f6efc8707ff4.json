{"ast":null,"code":"var _jsxFileName = \"/Users/johncaropino/Desktop/Capstone Phase 5/Phase-5-Capstone-Trivia/Phase-5-Capstone-Trivia-project/client/src/context/UserContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/React.createContext();\n\nfunction UserProvider({\n  children\n}) {\n  _s();\n\n  const [user, setUser] = useState();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = () => fetch('/auth').then(res => {\n      if (res.ok) {\n        res.json().then(user => setUser(user));\n      } else {\n        res.json().then(error => alert(error.errors));\n      }\n    });\n\n    if (!user) {\n      fetchData();\n    }\n  }, [user]);\n\n  const logout = () => {\n    fetch('/logout', {\n      method: 'DELETE'\n    }).then(() => setUser(null));\n  };\n\n  const oauth = userObject => {\n    fetch(\"/oauth\", {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userObject)\n    }).then(res => {\n      if (res.status === 201) {\n        res.json().then(setUser).then(() => navigate(\"/welcome\"));\n      } else {\n        res.json().then(error => alert(error.errors));\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      setUser,\n      oauth,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProvider, \"gOtRx8Mr8BKQdtn9mkT1sdV064Q=\", false, function () {\n  return [useNavigate];\n});\n\n_c = UserProvider;\nexport { UserContext, UserProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/johncaropino/Desktop/Capstone Phase 5/Phase-5-Capstone-Trivia/Phase-5-Capstone-Trivia-project/client/src/context/UserContext.js"],"names":["React","useState","useEffect","useNavigate","UserContext","createContext","UserProvider","children","user","setUser","navigate","fetchData","fetch","then","res","ok","json","error","alert","errors","logout","method","oauth","userObject","headers","body","JSON","stringify","status"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAGA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,EAApB;;AAEA,SAASC,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAAA;;AAClC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAAhC;AAEA,QAAMS,QAAQ,GAAGP,WAAW,EAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,SAAS,GAAG,MAClBC,KAAK,CAAC,OAAD,CAAL,CACCC,IADD,CACMC,GAAG,IAAI;AACX,UAAGA,GAAG,CAACC,EAAP,EAAU;AACRD,QAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBL,IAAI,IAAIC,OAAO,CAACD,IAAD,CAA/B;AACD,OAFD,MAGK;AACHM,QAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBI,KAAK,IAAIC,KAAK,CAACD,KAAK,CAACE,MAAP,CAA9B;AACD;AACF,KARD,CADA;;AAUA,QAAI,CAACX,IAAL,EACA;AAACG,MAAAA,SAAS;AAAI;AACf,GAbQ,EAaP,CAACH,IAAD,CAbO,CAAT;;AAeA,QAAMY,MAAM,GAAG,MAAM;AAEnBR,IAAAA,KAAK,CAAC,SAAD,EAAY;AAAES,MAAAA,MAAM,EAAE;AAAV,KAAZ,CAAL,CACKR,IADL,CACU,MAAMJ,OAAO,CAAC,IAAD,CADvB;AAEH,GAJC;;AAOA,QAAMa,KAAK,GAAIC,UAAD,IAAgB;AAC5BX,IAAAA,KAAK,CAAC,QAAD,EAAW;AACZS,MAAAA,MAAM,EAAE,MADI;AAEZG,MAAAA,OAAO,EAAC;AAAC,wBAAgB;AAAjB,OAFI;AAGZC,MAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeJ,UAAf;AAHO,KAAX,CAAL,CAKEV,IALF,CAKOC,GAAG,IAAI;AACV,UAAGA,GAAG,CAACc,MAAJ,KAAe,GAAlB,EAAsB;AAClBd,QAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBJ,OAAhB,EACCI,IADD,CACM,MAAIH,QAAQ,CAAC,UAAD,CADlB;AAEH,OAHD,MAIM;AACJI,QAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBI,KAAK,IAAIC,KAAK,CAACD,KAAK,CAACE,MAAP,CAA9B;AACD;AACJ,KAbD;AAcD,GAfD;;AAmBA,sBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEX,MAAAA,IAAF;AAAQC,MAAAA,OAAR;AAAiBa,MAAAA,KAAjB;AAAwBF,MAAAA;AAAxB,KAA7B;AAAA,cACGb;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;GAnDQD,Y;UAGUH,W;;;KAHVG,Y;AAqDT,SAASF,WAAT,EAAsBE,YAAtB","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nconst UserContext = React.createContext();\n\nfunction UserProvider({ children }) {\n  const [user, setUser] = useState();\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const fetchData = () =>\n    fetch('/auth')\n    .then(res => {\n      if(res.ok){\n        res.json().then(user => setUser(user))\n      } \n      else {\n        res.json().then(error => alert(error.errors))\n      }\n    })\n    if (!user)\n    {fetchData() } \n  },[user])\n\n  const logout = () => {\n        \n    fetch('/logout', { method: 'DELETE' })\n        .then(() => setUser(null))\n}\n\n\n  const oauth = (userObject) => {\n    fetch(\"/oauth\", {\n        method: \"POST\",\n        headers:{'Content-Type': 'application/json'},\n        body:JSON.stringify(userObject)\n     })\n     .then(res => {\n        if(res.status === 201){\n            res.json().then(setUser)\n            .then(()=>navigate(\"/welcome\"))\n        } \n         else {\n          res.json().then(error => alert(error.errors))\n        }\n    })   \n  }\n\n \n\n  return (\n    <UserContext.Provider value={{ user, setUser, oauth, logout }}>\n      {children}\n    </UserContext.Provider>\n  );\n}\n\nexport { UserContext, UserProvider };\n"]},"metadata":{},"sourceType":"module"}